{"version":3,"file":"index.js","sources":["../src/js/main.js"],"sourcesContent":["// Axios\r\nimport axios from 'axios';\r\n// IziToast\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n// SimpleLightbox\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst form = document.querySelector('.app-form');\r\nconst gallery = document.querySelector('#appGallery');\r\nconst galleryList = document.querySelector('#galleryList');\r\n\r\nlet searchText,\r\n  searchActivePage = 1,\r\n  searchMaxPage;\r\n\r\nconsole.log(`\r\n  Search Photos API: https://pixabay.com/api/docs/\r\n\r\n  Search Active Page: ${searchActivePage}\r\n  Search Max Page: ${searchMaxPage}\r\n  `);\r\n\r\nconst galleryItem = photoInfo => {\r\n  const item = document.createElement('li');\r\n  item.classList.add('gallery-item');\r\n  item.dataset.source = photoInfo.largeImageURL;\r\n\r\n  const itemLink = document.createElement('a');\r\n  itemLink.href = photoInfo.largeImageURL;\r\n  itemLink.classList.add('gallery-link');\r\n  itemLink.style.color = 'black';\r\n\r\n  const img = document.createElement('img');\r\n  img.src = photoInfo.webformatURL;\r\n  img.alt = photoInfo.tags;\r\n  img.width = 360;\r\n  img.height = 200;\r\n\r\n  const contentDiv = document.createElement('div');\r\n  contentDiv.classList.add('content');\r\n\r\n  // Likes\r\n  const infoDivLikes = document.createElement('div');\r\n  infoDivLikes.classList.add('info');\r\n\r\n  const infoKeyLikes = document.createElement('h5');\r\n  infoKeyLikes.classList.add('key');\r\n  infoKeyLikes.textContent = 'Likes';\r\n  infoDivLikes.appendChild(infoKeyLikes);\r\n\r\n  const infoValueLikes = document.createElement('p');\r\n  infoValueLikes.classList.add('value');\r\n  infoValueLikes.textContent = photoInfo.likes;\r\n  infoDivLikes.appendChild(infoValueLikes);\r\n\r\n  // Views\r\n  const infoDivViews = document.createElement('div');\r\n  infoDivViews.classList.add('info');\r\n\r\n  const infoKeyViews = document.createElement('h5');\r\n  infoKeyViews.classList.add('key');\r\n  infoKeyViews.textContent = 'Views';\r\n  infoDivViews.appendChild(infoKeyViews);\r\n\r\n  const infoValueViews = document.createElement('p');\r\n  infoValueViews.classList.add('value');\r\n  infoValueViews.textContent = photoInfo.views;\r\n  infoDivViews.appendChild(infoValueViews);\r\n\r\n  // Comments\r\n  const infoDivComments = document.createElement('div');\r\n  infoDivComments.classList.add('info');\r\n\r\n  const infoKeyComments = document.createElement('h5');\r\n  infoKeyComments.classList.add('key');\r\n  infoKeyComments.textContent = 'Comments';\r\n  infoDivComments.appendChild(infoKeyComments);\r\n\r\n  const infoValueComments = document.createElement('p');\r\n  infoValueComments.classList.add('value');\r\n  infoValueComments.textContent = photoInfo.views;\r\n  infoDivComments.appendChild(infoValueComments);\r\n\r\n  // Comments\r\n  const infoDivDownloads = document.createElement('div');\r\n  infoDivDownloads.classList.add('info');\r\n\r\n  const infoKeyDownloads = document.createElement('h5');\r\n  infoKeyDownloads.classList.add('key');\r\n  infoKeyDownloads.textContent = 'Downloads';\r\n  infoDivDownloads.appendChild(infoKeyDownloads);\r\n\r\n  const infoValueDownloads = document.createElement('p');\r\n  infoValueDownloads.classList.add('value');\r\n  infoValueDownloads.textContent = photoInfo.downloads;\r\n  infoDivDownloads.appendChild(infoValueDownloads);\r\n\r\n  contentDiv.appendChild(infoDivLikes);\r\n  contentDiv.appendChild(infoDivViews);\r\n  contentDiv.appendChild(infoDivComments);\r\n  contentDiv.appendChild(infoDivDownloads);\r\n\r\n  itemLink.appendChild(img);\r\n  item.appendChild(contentDiv);\r\n  item.appendChild(itemLink);\r\n  galleryList.appendChild(item);\r\n};\r\n\r\nlet galleryBox = new SimpleLightbox('.gallery li > a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 350,\r\n});\r\n\r\nconst searchPhotos = (search, page) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    console.log(`SearchPhotos()`, search, page);\r\n\r\n    if (page > searchMaxPage) {\r\n      searchActivePage = 1;\r\n      page = 1;\r\n    } else {\r\n      const pixabayResponse = await axios.get(`https://pixabay.com/api/`, {\r\n        params: {\r\n          key: '49344582-c64095957e0f61b264d1bf806',\r\n          q: search,\r\n          images_type: 'photo',\r\n          orientation: 'all',\r\n          safesearch: 'false',\r\n          page: page,\r\n          per_page: 40,\r\n        },\r\n      });\r\n      searchMaxPage = parseFloat(\r\n        pixabayResponse.data.totalHits / pixabayResponse.data.hits.lenght\r\n      ).toFixed(0);\r\n      console.log(`\r\n        Search Active Text: ${searchText}\r\n        Search Active Page: ${searchActivePage}\r\n        Search Max Page: ${searchMaxPage}\r\n      `);\r\n      if (pixabayResponse.data.hits.lenght === 0) {\r\n        iziToast.error({\r\n          position: `topRight`,\r\n          color: `red`,\r\n          message: `Sorry, there are no images matching your search query.Please try again!!`,\r\n        });\r\n      }\r\n      if (searchActivePage < searchMaxPage) {\r\n        document.querySelector(`#nextPage`).style.display = `block`;\r\n        document.querySelector(`#nextPage`).textContent = `Next Page (${\r\n          sear + 1\r\n        })`;\r\n      }\r\n\r\n      resolve(pixabayResponse);\r\n    }\r\n  });\r\n};\r\n\r\nconst renderPhotos = async () => {\r\n  const search = searchText;\r\n  const photosResponse = await searchPhotos(search, searchActivePage);\r\n  const photos = photosResponse.data.hits;\r\n\r\n  galleryList.innerHTML = '';\r\n  if (photos.lenght === 0) {\r\n    iziToast.error({\r\n      position: `topRight`,\r\n      color: `red`,\r\n      message: `Sorry, there are no images matching your search query.Please try again!!`,\r\n    });\r\n  } else {\r\n    photos.forEach(photo => {\r\n      galleryItem(photo);\r\n    });\r\n    galleryBox.refresh();\r\n  }\r\n};\r\n\r\nform.addEventListener(`submit`, async e => {\r\n  e.preventDefault();\r\n  galleryList.innerHTML = '';\r\n  const search = e.target.elements.search.value;\r\n  searchText = search;\r\n  searchActivePage = 1;\r\n  searchMaxPage = undefined;\r\n  if (search === ``) {\r\n    iziToast.warning({\r\n      position: `topRight`,\r\n      color: `yellow`,\r\n      message: `Please enter a valid search query!!`,\r\n    });\r\n    return false;\r\n  } else {\r\n    const item = document.createElement(`li`);\r\n    item.classList.add(`gallery-item`);\r\n\r\n    const itemLoader = document.createElement(`span`);\r\n    itemLoader.classList.add(`loader`);\r\n\r\n    item.appendChild(itemLoader);\r\n    item.style.textAlign = `center`;\r\n    item.style.border = `none`;\r\n    galleryList.appendChild(item);\r\n    renderPhotos();\r\n    e.target.reset();\r\n  }\r\n});\r\n\r\ndocument.querySelector(`#nextPage`).addEventListener(`click`, async e => {\r\n  searchActivePage++;\r\n  renderPhotos();\r\n\r\n  const galleryItemi = document.querySelector(`.gallery-item`);\r\n  if (galleryItemi) {\r\n    const cardHeight = galleryItemi.getBoundingClientRect().height;\r\n    window.scrollBy({\r\n      top: cardHeight * 2.75,\r\n      behavior: `smooth`,\r\n    });\r\n  }\r\n  if (searchActivePage === searchMaxPage) {\r\n    document.querySelector(`#nextPage`).dispatchEvent(`click`);\r\n    iziToast.info({\r\n      positon: `topRight`,\r\n      message: \"we're sorry,but you've reached the end of the search results\",\r\n    });\r\n  }\r\n});\r\n"],"names":["form","galleryList","searchText","searchActivePage","searchMaxPage","galleryItem","photoInfo","item","itemLink","img","contentDiv","infoDivLikes","infoKeyLikes","infoValueLikes","infoDivViews","infoKeyViews","infoValueViews","infoDivComments","infoKeyComments","infoValueComments","infoDivDownloads","infoKeyDownloads","infoValueDownloads","galleryBox","SimpleLightbox","searchPhotos","search","page","resolve","reject","pixabayResponse","axios","iziToast","renderPhotos","photos","photo","e","itemLoader","galleryItemi","cardHeight"],"mappings":"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"}